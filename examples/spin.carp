(import gl)

(defn tick [state]
  (+ state 0.033f))

(defn draw [state]
  (let [t (* 5f (copy state))]
    (for (i 0 20)
      (let [step 0.05f
            r (* step (itof i))
            r2 (+ r step)]
        (draw-line (* r (cosf (* t r)))
                   (* r (sinf (* t r)))
                   (* r2 (cosf (* t r2)))
                   (* r2 (sinf (* t r2))))))))

(defn spin []
  (glfw-app "Spin" default-init tick draw default-on-keys))
