(defn get-deps (ast)
  (do
    ;;(println (str "visiting " ast))
    (if (dict? ast)
      (if (= :lookup (:node ast))
        (if (def? (:value ast))
          (if (ffi? (eval (read (:value ast))))
            '()
            (list (:value ast)))
          (list (:value ast)))
        (mapcat get-deps (values ast)))
      (if (list? ast)
        (mapcat get-deps ast)
        '()))))
